Upload a file to the storage


- [Presenter] So in the example that follows, in this video, the goal will be to update and manage the form, and then send files to the cloud storage in order to create new documents with text and media contents. We're going to start by importing to the scope Storage. And then we're going to import this method from the Storage, which is uploadFile. Here we go. And then you want to do this from this form. Like, whenever the user hit the submit button. So you want to allow first to upload the image. And we're going to pass as a parameter the information of the inputs of the file, and then it returns a Promise. I'm going to add one debugger statement right here to stop the program, and we're going to see what we get back. So once this is fulfilled, this Promise, we want to do the next step, which is to first create a new document and then run two actions locally to update the the collection, the list of items, and also change the visibility of the form. Okay, we're going to do that first, which is to upload the image. So let's see how it works. So basically you want to add "test new image". That's going to be different. Then we're going to upload something different of what we had so far, like maybe this one. Okay. And then we can, I think I had, yeah. What I'd like is also to maybe change this to "Save and upload". That makes more sense. Here we go. And then we can hit Save and upload, here we go. So that works perfectly here. So now we want to check, if we go back to our storage here, we're going to see that now you've got this directory, excellent, with the new image. Okay. And the way this is set up, so as I was explaining, it looks like the same file system of your machine. So first you've got a directory with the name of the images. This is something that we have defined right here. And then it gets concatenated with the name of the image itself, with the title. And now if we click on this one, you're going to see that we get a preview. Perfect. And also you've got the file location, and that's going to be the next step. What we want next is to be able to download the URL. So get the path to this image so we can download it, and then use the information along with the file inputs, et cetera. So instead of just using this, we're going to define another method which will allow to download the information from the image uploaded from the storage. And then we're going to create a new document with the information of the stock image stored from the cloud storage, so that's going to be another step. So before we can get the URL information and set the new documents, we need to implement one function, which is to download the URL. Let me actually show you that. But we're going to do that next. We're going to access the documentation. Let's go back to Storage. Under Web. And here you're going to find this section which is Download Files. This is what we are doing next. We want to see how to download files. So we can now set new documents with media content.